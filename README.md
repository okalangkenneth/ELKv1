# Logging in an ASP.NET Application using Docker, Elasticsearch, and Kibana.

## Introduction:


Logging is an essential part of any application, as it provides valuable insights into its performance and usage. In this demonstration, we'll walk through the process of setting up a logging solution for an ASP.NET application using Docker, Elasticsearch, and Kibana. This stack provides a scalable, centralized, and cost-effective way to store, analyze, and visualize logs generated by your application.

For example, a company running an e-commerce website could use this logging stack to monitor their website's performance and track any errors that may occur. The ASP.NET application running on a Docker container generates logs that are sent to Elasticsearch using the Serilog library. Elasticsearch indexes the logs, and Kibana provides a web interface for searching, filtering, and visualizing the logs. This allows the company to quickly identify issues, track performance over time, and scale the logging solution as their business grows.

In this demonstration, we'll cover the following steps:

- Setting up Docker and running Elasticsearch and Kibana containers.
- Creating an ASP.NET 6 web API project with Serilog logging in visual studio code.
- Configuring Serilog to send logs to Elasticsearch.
- Running the web API project in a Docker container and generating logs.
- Using Kibana to search, filter, and visualize the logs.

Throughout the demonstration, we'll include snapshots of the code and Docker containers running, so you can see exactly how everything works together to create a robust logging solution.

## Requirements
Before getting started, make sure you have the following installed on your machine:

Docker

.NET 6 SDK

Visual Studio code.

## Setting up Docker and running Elasticsearch and Kibana containers.

Step 1: Install Docker.

First, we need to install Docker. Docker provides a platform for developers and sysadmins to develop, ship, and run applications. You can download Docker from the official website here.

Step 2: Run Elasticsearch and Kibana containers.

Next, we'll run Elasticsearch and Kibana containers using Docker Compose. Docker Compose is a tool for defining and running multi-container Docker applications.

Create a new directory named ELKv1 in your project directory and create a new file named docker-compose.yml inside it in visual studio code. Then, copy the following code into docker-compose.yml:


````C#
version: '3.1'

services:
  elasticsearch:
    container_name: els
    image: docker.elastic.co/elasticsearch/elasticsearch:7.16.1
    ports:
      - 9200:9200
    volumes:

      - elasticsearch-data:/usr/share/elasticsearch/data
    environment:
      - xpack.monitoring.enabled=true
      - xpack.watcher.enabled=false
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
      - discovery.type=single-node
    networks:
      - elastcinetwork

  kibana:
    container_name: kibana
    image: docker.elastic.co/kibana/kibana:7.16.1
    ports:
      - 5601:5601
    depends_on:
      - elasticsearch
    environment:
      - ELASTICSEARCH_URL=http://localhost:9200
    networks:
      - elastcinetwork

networks:
  elastcinetwork:
    driver: bridge

volumes:
  elasticsearch-data:
  ````
  
This code defines two services: elasticsearch and kibana. The elasticsearch service runs the Elasticsearch container and exposes port 9200 for Elasticsearch's REST API. The kibana service runs the Kibana container and exposes port 5601 for Kibana's web interface. The two services are connected to a network named elastcinetwork.

To run the Elasticsearch and Kibana containers, open a terminal and navigate to the elk directory. Then, run the following command:

````bash
docker-compose up 
````
This command will download the Elasticsearch and Kibana images and start the containers in the background. You should see output similar to the following:

````javascript
Creating network "elastcinetwork" with the default driver
Creating elasticsearch ... done
Creating kibana         ... done
````javascript



![image](https://user-images.githubusercontent.com/68539411/221275300-768b055b-6851-464d-9adb-5f1c026400f9.png)

  











